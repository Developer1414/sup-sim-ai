class TemplateManager {
  constructor() {
    this.templates = {};
    this.categories = [];
  }

  loadTemplates() {
    // Load templates from the provided patterns
    this.categories = [
      { id: 'utochneniya', name: 'Уточнения' },
      { id: 'rassrochka', name: 'Рассрочка' },
      { id: 'ne_oformil_zakaz', name: 'Клиент не оформлял заказ' },
      { id: 'neizvestnoe_spisanie', name: 'Неизвестное списание' },
      { id: 'smena_statusa', name: 'Смена статуса' },
      { id: 'vnutrennie_zaprosy', name: 'Внутренние запросы' },
      { id: 'avtootmena', name: 'Автоотмена' },
      { id: 'vozvrat_po_braku', name: 'Возврат по браку' },
      { id: 'otmena_dostavki', name: 'Отмена доставки' },
      { id: 'kurier', name: 'Курьер' },
      { id: 'chek', name: 'Чек' },
      { id: 'wb_koshelek', name: 'WB Кошелёк' },
      { id: 'zaderzhka_dostavki', name: 'Задержка доставки' },
      { id: 'gosuslugi', name: 'Госуслуги' },
      { id: 'otzyv', name: 'Отзыв' },
      { id: 'rubli_za_otzyv', name: 'Рубли за отзыв' },
      { id: 'otmena_zakaza', name: 'Отмена заказа' },
      { id: 'drugoe', name: 'Другое' },
      { id: 'chat_s_prodavcom', name: 'Чат с продавцом' },
      { id: 'жалoby', name: 'Жалобы' }
    ];

    this.templates = {
      'utochneniya': [
        { text: 'Уточните, пожалуйста, ваш вопрос.' },
        { text: 'Уточните, пожалуйста, артикул товара.' },
        { text: 'Пожалуйста, пришлите скриншот раздела "О приложении".\n\nВ данный раздел можно зайти так: нажмите на иконку профиля → пролистайте немного вниз → нажмите кнопку "Информация для клиентов" → в самом низу будет кнопка "О приложении".' },
        { text: 'Деньги списаны в счёт оплаты товаров в профиле с именем XXXXX, последние 4 цифры номера **-XX-XX из города XXXXX.\n\nУточните, пожалуйста, вам знаком данный человек?' },
        { text: 'Уточните, пожалуйста, когда и в какое время был закрыт пункт выдачи и было ли объявление о техническом перерыве на двери пункта выдачи?' }
      ],
      'rassrochka': [
        { text: 'Рассрочка не может оформиться самостоятельно. Такой способ оплаты происходит в несколько этапов, случайное оформление невозможно.\n\nПри оформлении вы нажали на кнопку «В рассрочку» в карточке товара. При оформлении рассрочки первый раз, вы заполнили заявку и подписали договор.\n\nПосле этого вам был предоставлен график платежей и информация о переплате, после чего вы подтвердили заказ. Рекомендуем при оформлении заказов внимательно проверять этот параметр перед подтверждением покупки.\n\nОбращаем внимание, что мы не навязываем услуги, а предоставляем их на выбор клиентов. Если рассрочка вам не нужна, просто оставьте ползунок в исходном положении.' }
      ],
      'ne_oformil_zakaz': [
        { text: 'Уточните, пожалуйста, следующее:\n\n• Были ли товары в корзине? Знакомы ли они?\n• Дата и время, когда заметили заказ.\n• Есть ли наличие доступа третьих лиц, включенный VPN,\nавиа-режим.\n• Если вы на сайте, то пришлите: версию ОС и версию браузера.\n• Если вы в приложении, то пришлите:  Скриншот «О приложении». В данный раздел можно зайти так: нажмите на иконку профиля -> пролистайте немного вниз -> нажмите кнопку "Информация для клиентов" -> в самом низу будет кнопка "О приложении".\n\nдалее передать эту инфу СВ' }
      ],
      'neizvestnoe_spisanie': [
        { text: 'Уточните, пожалуйста, следующее:\n\n— Сумму списания\n— Дату и время списания\n— Последние 4 цифры номера карты' }
      ],
      'smena_statusa': [
        { text: 'Вижу, что возврат данного товара принят. Пожалуйста, ожидайте смену статуса в течение 7 дней.' }
      ],
      'vnutrennie_zaprosy': [
        { text: 'Передали ваш запрос коллегам. Пожалуйста, ожидайте.' },
        { text: 'Оформил внутренний запрос профильным специалистам. Его № XXXXXX. Ответ поступит в раздел «Уведомления» вашего профиля. Пожалуйста, ожидайте.' },
        { text: 'Вижу, что ваш запрос ещё в работе. Пожалуйста, ожидайте.' },
        { text: 'Передали запрос на уведомление продавца. Пожалуйста, ожидайте.' },
        { text: 'Все запросы рассматриваются вручную. Сроки не регламентированы. Пожалуйста, ожидайте.' }
      ],
      'avtootmena': [
        { text: 'Вы не пришли в пункт выдачи и не отказались или не забрали товар. Заказ был отменён по сроку хранения. При отмене заказа по истечении срока хранения возвращаются деньги за товар, за исключением обратной транспортировки невостребованного товара обратно на склад — 200 ₽ за каждую единицу товара.\n\nДанная информация указана в Правилах пользования торговой площадкой — пункт 8.3. Также у вас в разделе «Заказы» указываются сроки хранения в трекере товара и стоимость обратной транспортировки при автоматической отмене по срокам хранения.' }
      ],
      'vozvrat_po_braku': [
        { text: 'Если обнаружили брак, некомплект или не тот товар в упаковке, постарайтесь сразу оформить заявку на возврат. Создать заявку можно в приложении в профиле в разделе «Возврат товара» или на сайте в разделе «Покупки» → Возвраты.' },
        { text: 'Если продавец отказал в возврате товара, но вы не согласны с его решением, можете оспорить его в течение 5 дней. Это можно сделать в приложении в разделе «‎Возврат товара»‎ и на сайте в разделе «Возвраты‎».‎  Можем всё проверить и ответим вам в этом же разделе.' },
        { text: 'Если продавец отклонил заявку и оспорить её не получилось, то вы не сможете вернуть товар. Ответ продавца можно посмотреть в заявке.' },
        { text: 'Данный товар можно отменить на 11-й день задержки от предполагаемой даты доставки в профиле. Либо отказавшись от него в пункте выдачи.' },
        { text: 'Чтобы оформить заявку на возврат, нужно:\n\n1. В профиле на сайте открыть раздел «Покупки» → Возвраты.\n\n2. Выбрать товар.\n\n3. Указать причину возврата.\n\n4. Добавить подробное описание дефекта, фотографии или видео товара целиком, вшивного ярлыка, штрихкода на пакете и дефекта. Форматы фото — jpg и png.\n\n5. Нажать «Создать заявку».' }
      ],
      'otmena_dostavki': [
        { text: 'Сейчас отменить данный товар не получится.\n\nВы можете отказаться от него при получении, либо отменить его в профиле через 10 дней задержки от предполагаемой даты доставки.' }
      ],
      'kurier': [
        { text: 'Вижу, что курьер ещё не назначен. Как только он будет назначен и заберёт ваш товар, вам придёт об этом уведомление. Пожалуйста, ожидайте.' }
      ],
      'chek': [
        { text: 'Как найти чек:  \n— в приложении: профиль → Ваше имя → Оплата → Чеки;  \n— на сайте: профиль → Покупки → Чеки.' }
      ],
      'wb_koshelek': [
        { text: 'Уточните, пожалуйста, с какой проблемой вы сталкиваетесь при попытке открыть WB Кошелёк?' },
        { text: 'Уточните, пожалуйста, с какой проблемой вы сталкиваетесь при попытке пополнить WB Кошелёк?' },
        { text: 'Перевод не проходит из-за превышения лимита.\n\nУ вас израсходован лимит на XXXX ₽ (+ на балансе находится XXXX ₽ = XXXX ₽).\n\nПополнить можете не более, чем на XXXX ₽. \n\nЕсли нужно пополнить больше, то можете улучшать WB Кошелёк. Либо ожидать обновления лимита 1 числа следующего месяца.' },
        { text: 'Напишите, пожалуйста, в поддержку WB Банка в приложении Wildberries: \n\nРаздел WB Банк → Три точки наверху справа → Поддержка → Поддержка WB Кошелька.' },
        { text: 'Если вы не помните пароль от кошелька, вам необходимо его восстановить через Госуслуги, для этого номер телефона должен совпадать с номером указанный здесь. \n\nЕсли не совпадает, то необходимо изменить номер телефона на Госуслугах и восстановить пароль.' },
        { text: 'Из минимального WB Кошелька невозможно вывести средства. Остаток можно потратить на Wildberries.\n\nЧтобы снять ограничения на оплату и переводы, необходимо повысить уровень кошелька. Для этого авторизуйтесь через «Госуслуги», затем в разделе «WB Кошелёк» нажмите «минимальный» и выберите уровень для повышения.\n\nМы не имеем доступа к вашему аккаунту и можем только подтвердить вашу личность. Это может занять до 24 часов.' },
        { text: 'Чтобы пополнить WB Кошелёк:\n\n1. Зайдите в приложение банка и нажимите кнопку «Перевод по номеру телефона» или «Перевод по СБП».\n\n2. Введите номер телефона, на который зарегистрировали профиль Wildberries.\n\n3. Выберите в качестве получателя «Wildberries (Вайлдберриз банк)» и нажимает кнопку «Перевести».' }
      ],
      'zaderzhka_dostavki': [
        { text: 'К сожалению, доставка немного задерживается. Мы ждём передачу товара от продавца. Простите за ожидание — как только получим товар, статус обновится.' },
        { text: 'Искренне жаль, что доставка задерживается. Понимаю, насколько это неприятно и может нарушить ваши планы. Мы держим ситуацию на контроле и сразу напишем, когда будут новости.' },
        { text: 'При оформлении заказа указывается предположительная дата доставки, максимально близкая к реальной.\n\nНа логистику влияет множество факторов, которые от нас не зависят.' },
        { text: 'Заказ задержался на одном из этапов доставки. При оформлении заказа мы стараемся указывать ориентировочные сроки доставки максимально близкие к реальному сроку поступления товаров. Однако, иногда некоторые изменения в логистике могут привести к задержкам.\n\nКак только заказ будет готов к получению, пришлем вам уведомление в профиль.' }
      ],
      'gosuslugi': [
        { text: 'Обновление данных на Госуслугах может занимать до суток. Пожалуйста, попробуйте открыть кошелёк ещё раз через сутки. Если всё-равно не получится, то пожалуйста, напишите нам снова.' },
        { text: 'Вот как можно подтвердить Госуслуги:\n\n1. Перейдите в раздел «WB Банк».\n2. Нажмите на баннер с предложением улучшить кошелёк.\n3. Прочитайте условия и нажмите кнопку «Улучшить кошелёк» → Продолжить.\n4. После этого вы можете выбрать способ подтверждения: Госуслуги или Mobile ID.\n5. Подтверждение через Госуслуги: Подтвердить личность через Госуслуги, следуя инструкции: войти в личный кабинет на Госуслугах, проверить свои данные в документах и разрешить обработку персональных данных.\n\nПодтверждение через Mobile ID: Авторизоваться через Mobile ID могут клиенты МТС, МегаФон и Билайн.\n\nЕсли у вас другой оператор, то появится уведомление в приложении, что данные не получены и можно пройти идентификацию только через Госуслуги.\n\n6. После того как вы подтвердили личность через Госуслуги или Mobile ID, нужно дождаться улучшения кошелька до стандартного. Это может занять до суток.' }
      ],
      'otzyv': [
        { text: 'Отзыв должен быть только о товаре — так другим покупателям проще сделать выбор.\n\nКакие отзывы не пройдут проверку:\n\n• в которых много капслока — слов с большими буквами,\n• с любыми контактами: ссылкой, адресом, номером,\n• с оскорблениями,\n• если есть упоминание, что товар можно купить в другом месте.\n\nОтзыв можно 1 раз дополнить и поставить оценку. Если отзыв не прошёл проверку и не опубликован, дополнить его не получится.' },
        { text: 'Рекомендуем при написании отзыва ориентироваться на условия публикации -https://legal.wildberries.ru/consumers-offer/country/ru/lang/ru/#anchor-10' },
        { text: 'К сожалению, некоторые продавцы, пытаются искусственно повлиять на рейтинг товара через отзывы, предлагая различные формы вознаграждения за них. Мы этого не приветствуем, поэтому разработали систему, которая позволяет отслеживать малоинформативные отзывы, а также отзывы, которые вызывают подозрение и скрывать их в карточке товара. Это не означает, что именно ваш отзыв был оставлен за вознаграждение, но по тем или иным параметрам, нашей системе он показался подозрительным. Мы не раскрываем список параметров, который анализирует система для того, чтобы не снижать эффективность такой проверки, но при выявлении ошибок, дорабатываем ее, чтобы повысить точность.' }
      ],
      'rubli_za_otzyv': [
        { text: 'Вы можете получить деньги за отзыв, если заказали товар со значком «Рубли за отзыв». Для этого после получения заказа в течение 5 дней нужно оставить отзыв о товаре. Вы можете написать только комментарий либо добавить к нему фото или видео.\n\nЕсли вы поставите только оценку, деньги не начислятся.\n\nЕсли в отзыве вы добавите и комментарий, и фото, и видео, то получите максимальное количество рублей — то, которое было указано на значке.\n\nДеньги придут на WB Кошелёк в течение 15 дней с момента получения товара. Если вы вернёте товар, то рубли не начислятся.' }
      ],
      'otmena_zakaza': [
        { text: 'Сейчас отменить данный товар не получится.\n\nОтменить его можно в профиле начиная с XX января 2026. Либо при отказе от него в пункте выдачи.' }
      ],
      'drugoe': [
        { text: 'Пожалуйста, попробуйте следующее:\n\n— Проверьте, что VPN выключен\n— Очистите cookies/кэш на вашем устройстве.\n— Выйдите из приложения через кнопку «Выйти», затем войдите снова с помощью SMS-кода.\n— Обновите приложение до последней версии' },
        { text: 'Мы отходим от горячей линии в пользу консультирования клиентов в чате, поскольку это гораздо удобнее и информативнее для клиентов: вам не придётся ждать, когда оператор возьмёт трубку – сразу сможете задать свой вопрос. Нет необходимости отвечать оператору здесь и сейчас, как это происходит во время звонка. Можете продолжить диалог, когда вам удобно.' },
        { text: 'Оплатить товар по QR-коду можно.\n\nДля этого:\n\n1. Войдите в свой кошелёк.\n2. Сверху нажмите на кнопку "Оплатить QR-кодом".\n3. На открывшемся экране нажмите "Сгенерировать код".\n   \nА после, можете показать QR-код сотруднику пункта выдачи. Деньги будут списаны с кошелька.' },
        { text: 'Если вы хотите направить официальную претензию компании Wildberries или получить юридически обоснованный ответ, то можете это сделать, используя электронную почту sales@wildberries.ru.\n\nРеквизиты и все данные находятся по ссылке:  https://www.wildberries.ru/services/rekvizity. \n\nВсе претензии руководство сможет просмотреть только по данной ссылке. Как только она будет просмотрена, вам предоставят ответ на электронную почту.' },
        { text: 'Мы не являемся юридической консультацией и не уполномочены комментировать законы. Операторы консультируют по тем правилам работы торговой площадки, которые действуют на данный момент времени.' },
        { text: 'На товары, которые оформлены в рассрочку, оформить вызов курьера для доставки нельзя.' },
        { text: 'К сожалению, товар не получится доставить — он был списан в процессе доставки. Простите, что так получилось. Просим отменить этот заказ в профиле, для этого в приложении нажмите на статус под товаром, сегодня появится кнопка «Отменить доставку», на сайте — зайдите в раздел «Заказы» и наведите курсор на товар. Если товар ещё актуален, можете заказать его заново.' },
        { text: 'Сожалеем, что работа Нашей Торговой площадки произвела на Вас негативное впечатление. Нам очень дорого мнение Наших покупателей, и мы надеемся, что эта ситуация не повлияет на наше дальнейшее сотрудничество.' }
      ],
      'chat_s_prodavcom': [
        { text: 'Вы можете написать в чат продавцу. Продавец ответит в течение 10 дней.\n\nЧтобы написать в чат продавцу, нужно:\n\nВ приложении:\n1. В покупках нажать на 3 точки рядом с товаром. \n⁠⁠⁠⁠⁠⁠⁠2. Нажать кнопку «Задать вопрос продавцу».\n\nНа сайте: нужно нажать на 3 точки около товара в заказах или в покупках, а затем кнопку «Написать продавцу».' }
      ],
      'жалoby': [
        { text: 'Вы можете пожаловаться на продавца. Пожаловаться на продавца можно только на сайте Wildberries.\n\nЧтобы это сделать, пожалуйста:\n\n— Перейдите в карточку товара;\n— В верхнем правом углу карточки товара нажмите на значок «сообщение с восклицательным знаком внутри»;\n— Выберите причину жалобы;\n— Нажмите кнопку «Пожаловаться».\n\nЕсли вы используете мобильную версию сайта, пожалуйста:\n\n— Перейдите в карточку товара;\n— Спуститесь ниже к названию товара;\n— Рядом с названием товара нажмите на три вертикальные точки;\n— Нажмите кнопку «Пожаловаться».' }
      ]
    };
  }

  getCategories() {
    return this.categories;
  }

  getTemplatesByCategory(categoryId) {
    return this.templates[categoryId] || [];
  }

  getUtochneniyaTemplates() {
    return this.templates['utochneniya'] || [];
  }

  findBestMatchingTemplate(message, categoryId) {
    // Simple matching algorithm - in a real implementation this would be more sophisticated
    const templates = this.getTemplatesByCategory(categoryId);
    if (!templates || templates.length === 0) {
      return null;
    }

    // Return the first template as a simple match
    return templates[0];
  }
}

// Create a singleton instance
const templateManager = new TemplateManager();
export default templateManager;