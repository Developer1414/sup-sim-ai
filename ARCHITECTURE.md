# Архитектура симулятора поддержки Wildberries

## Обзор

Симулятор поддержки Wildberries представляет собой веб-приложение, моделирующее реальные условия работы оператора службы поддержки маркетплейса. Приложение реализует строгую систему шаблонов, реалистичное поведение клиентов и комплексную систему оценки KPI.

## Структура проекта

```
/workspace/
├── package.json
├── vite.config.js
├── index.html
├── src/
│   ├── main.jsx
│   ├── App.jsx
│   ├── App.css
│   ├── components/
│   │   ├── ChatInterface.jsx
│   │   ├── CRMSystem.jsx
│   │   └── KPIMonitor.jsx
│   └── services/
│       ├── TemplateManager.js
│       ├── ClientGenerator.js
│       └── KPISystem.js
└── README.md
```

## Компоненты приложения

### 1. App.jsx
Главный компонент приложения, управляющий состоянием всей системы:
- Хранит текущий чат, список всех чатов и данные KPI
- Управляет переключением между вкладками (чаты/CRM)
- Обрабатывает отправку сообщений и эскалации
- Интегрируется с сервисами для генерации клиентов и оценки ответов

### 2. ChatInterface.jsx
Интерфейс чата с клиентами:
- Отображает историю переписки
- Предоставляет выбор шаблонов по категориям
- Включает секцию "Уточнения" для быстрого доступа
- Содержит поле ввода для свободного текста
- Кнопка для передачи супервайзеру

### 3. CRMSystem.jsx
CRM-система с информацией о клиентах:
- Профиль клиента (имя, телефон, email)
- История заказов
- Финансовая информация (баланс, бонусы, кредитный лимит)
- История обращений в поддержку
- Примечания и уровень лояльности

### 4. KPIMonitor.jsx
Мониторинг показателей эффективности:
- Визуализация основных метрик (корректность, регламент, время ответа)
- Количество обработанных чатов
- Количество ошибок и эскалаций
- Среднее время ответа

## Сервисы

### 1. TemplateManager.js
Управление шаблонами ответов:
- Загрузка и хранение всех шаблонов из предоставленного файла
- Классификация шаблонов по категориям
- Методы для получения шаблонов по категориям
- Поиск наиболее подходящего шаблона для контекста

Категории шаблонов:
- Уточнения
- Рассрочка
- Клиент не оформлял заказ
- Неизвестное списание
- Смена статуса
- Внутренние запросы
- Автоотмена
- Возврат по браку
- Отмена доставки
- Курьер
- Чек
- WB Кошелёк
- Задержка доставки
- Госуслуги
- Отзыв
- Рубли за отзыв
- Отмена заказа
- Другое
- Чат с продавцом
- Жалобы

### 2. ClientGenerator.js
Генерация клиентов и их поведения:
- Создание профилей клиентов с различными характеристиками
- Генерация различных типов поведения (агрессивный, запутанный, терпеливый и т.д.)
- Генерация реалистичных начальных сообщений
- Генерация ответов клиентов на основе поведения и контекста

Типы поведения клиентов:
- Агрессивное
- Запутанное
- Терпеливое
- Требовательное
- Вежливое
- Фрустрированное
- Злое
- Отчаявшееся

### 3. KPISystem.js
Система оценки показателей эффективности:
- Оценка корректности использования шаблонов
- Проверка соответствия регламенту
- Измерение времени реакции
- Расчет удовлетворенности клиента
- Применение штрафов за ошибки
- Расчет общего рейтинга оператора

## Игровая механика

### Поток обращений
- Клиенты генерируются с различными проблемами и типами поведения
- Сообщения клиентов содержат эмоциональные, неполные или противоречивые запросы
- Поведение клиентов может изменяться в процессе диалога

### Действия оператора
1. **Классификация обращения**: выбор категории из списка
2. **Запрос уточнений**: использование шаблонов "Уточнения"
3. **Выбор шаблона**: применение подходящего шаблона из категории
4. **Свободный ввод**: возможность написания собственного текста (с риском штрафов)
5. **Эскалация**: передача супервайзеру для нестандартных случаев

### Система оценки KPI

#### Метрики:
- **Корректность (30%)**: использование правильного шаблона для ситуации
- **Соответствие регламенту (25%)**: соблюдение правил формулировок
- **Время реакции (20%)**: скорость ответа на сообщения
- **Удовлетворенность клиента (15%)**: вероятностный расчет на основе ответов
- **Эскалации (10%)**: количество передач супервайзеру

#### Штрафы:
- Использование неправильного шаблона: -10 очков
- Ответ вне регламента: -15 очков
- Медленный ответ: -5 очков
- Ненужная эскалация: -8 очков

#### Бонусы:
- Правильный выбор шаблона: +5 очков
- Быстрый ответ: +3 очка
- Высокая удовлетворенность клиента: +7 очков

## Особенности реализации

### Система шаблонов
- Все ответы строго ограничены предоставленными шаблонами
- Невозможно "угадать" ответ интуитивно
- Единственный путь к высоким показателям - строгое следование шаблонам
- Инициатива вне регламента системно наказывается

### Поведение клиентов
- Реалистичные реакции на ответы оператора
- Возможность нелогичного поведения (например, недовольство корректным ответом)
- Изменение настроения в процессе диалога
- Повторение одних и тех же требований

### CRM-система
- Полнофункциональный интерактивный интерфейс
- Темная тема для уменьшения усталости глаз
- Все элементы кликабельны и функциональны
- Интеграция с данными клиентов и истории заказов

## Техническая реализация

### Frontend
- React 18 для компонентной архитектуры
- Vite для быстрой сборки и разработки
- CSS-модули для стилизации компонентов
- Темная цветовая схема для уменьшения усталости глаз

### Архитектура данных
- Состояния управляются через React hooks (useState, useEffect)
- Данные шаблонов загружаются один раз при инициализации
- История чатов сохраняется в состоянии приложения
- Система KPI обновляется в реальном времени

### Интеграция с ИИ
- Использование OpenRouter API для генерации поведения клиентов
- Анализ ответов оператора на соответствие регламенту
- Расчет индивидуальных данных клиентов
- Роль супервайзера при эскалации

## Пример игровых сценариев

### Сценарий 1: Возврат бракованного товара
1. Клиент: "Пришла одежда, а она вся порвана!"
2. Оператор выбирает категорию "Возврат по браку"
3. Оператор использует шаблон: "Если обнаружили брак, некомплект или не тот товар в упаковке, постарайтесь сразу оформить заявку на возврат..."
4. Клиент отвечает: "Хорошо, спасибо"
5. KPI: высокая корректность, положительная удовлетворенность

### Сценарий 2: Неоформленный заказ
1. Клиент: "С моей карты списали деньги, но я ничего не заказывал!"
2. Оператор выбирает категорию "Клиент не оформлял заказ"
3. Оператор использует шаблон с уточнениями, затем передает информацию супервайзеру
4. KPI: корректное следование регламенту, но возможен штраф за эскалацию

### Сценарий 3: Попытка "человеческого" ответа
1. Клиент: "Почему так долго доставляется?"
2. Оператор отвечает свободным текстом: "Понимаю ваше недовольство, посмотрю что можно сделать"
3. KPI: штраф за ответ вне регламента

## Заключение

Симулятор поддержки Wildberries создан для подготовки операторов к реальным условиям работы, где важны строгость соблюдения регламентов, устойчивость к давлению и способность точно использовать шаблонные формулировки. Приложение моделирует системное давление, когнитивную нагрузку и сложности реальной работы поддержки, обеспечивая объективную оценку профессиональных качеств операторов.